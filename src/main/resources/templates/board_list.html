<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<head th:replace="head.html :: head"></head>
	<style>
	
	.likeUserList{
		float: right;
		margin-right: 10px;
	}
	#modal.modal-overlay {
		 		width: 100%;
	            height: 100%;
	            position: fixed;
	            left: 0;
	            top: 0;
	            display: flex;
	            flex-direction: column;
	            align-items: center;
	            justify-content: center;
	            background: rgba(255, 255, 255, 0.25);
	            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
	            backdrop-filter: blur(1.5px);
	            -webkit-backdrop-filter: blur(1.5px);
	            border-radius: 10px;
	            border: 1px solid rgba(255, 255, 255, 0.18);
	            display: none;
	            z-index: 1050;
	}
	
	
	#modal .modal-window {
		  		position: relative;
	            box-shadow: 0 8px 32px 0 rgba(88, 88, 88, 0.37);
	            backdrop-filter: blur( 13.5px );
				display: block;
				background-color: #16151a;
				margin: 40px auto;
				width: auto;
				height: auto;
				/* max-width: 420px; */
				padding: 20px;
				border-radius: 12px;
				overflow: hidden;
	}
	
	#modal .title {
		 padding-left: 10px;
	            display: inline;
	            text-shadow: 1px 1px 2px gray;
	            color: white;
	}
	
	#modal .title h2 {
		display: inline;
	}
	
	#modal .close-area {
		display: inline;
		float: right;
		padding-right: 10px;
		cursor: pointer;
		text-shadow: 1px 1px 2px gray;
		color: white;
	}
	
	#modal .content {
		 		margin-top: 20px;
	            padding: 0px 10px;
	            text-shadow: 1px 1px 2px gray;
	            color: white;
	           
	}
	
	.search_box{
		background-color: black;
		color: white;
		 border:none;
		 border-right:0px; 
		 border-top:0px; 
		text-decoration:underline;
	
	}
	
	.LikeBtn:hover{
	 background-color: #008CBA;
	  color: white;
	}
	.followedBtn:hover{
	 background-color: #008CBA;
	  color: white;
	}
	.myBtn:hover{
	 background-color: #008CBA;
	  color: white;
	}
	
	.searchBtn:hover{
	background-color: #008CBA;
	  color: white;
	}
	
	.uploadBtn:hover{
	background-color: #008CBA;
	  color: white;
	}

	</style>
</head>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<body>
	<!-- header -->
	<header th:replace="header.html :: header"></header>
	<!-- end header -->

	<!-- sidebar -->
	<aside th:replace="sidebar.html :: aside"></aside>
	<!-- end sidebar -->

	

	<!-- main content -->
	<main class="main">
		<div class="container-fluid" >
			 <div class="row row--grid" >
				
				<div class="col-12">
					<ul class="breadcrumb">
						<li class="breadcrumb__item"><a href="index.html">Home</a></li>
						<li class="breadcrumb__item breadcrumb__item--active">News</li>
					</ul>
				</div>
				

				
				<div class="col-12">
					<div class="main__title main__title--page">
						<h1>게시글 목록</h1>
					</div>
					 <div class="header__search">
			<input id="search" type="text" name="keyword" placeholder="Search">
				<button type="submit" id="searchBtn" class="searchBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z"/></svg></button>
				<button type="button" class="close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>
			</div>
					<button id="LikeBoardListBtn" class="LikeBtn" style="color:white;">좋아요 한 게시물<img src="/img/love-message.png" style="width:40px;"></button>
					<button id="followedBoardListBtn" class="followedBtn" style="color:white;">팔로우 한 게시물<img src="/img/love-message.png" style="width:40px;"></button>
					<button id="myBoardListBtn" class="myBtn" style="color:white;">내 게시물<img src="/img/love-message.png" style="width:40px;"></button>
					
					<a class="uploadBtn" style="color:white; padding:20px; margin-left: 91.5%; margin-bottom: 90%;"  onclick="location.href='boardUploadPage'">글쓰기  <img src="/img/add-list.png" style="width:40px; height:40px;"></a>
				</div>
					
				

				
			</div>

			<div class="tab-content" id="boardListArea">
				<div class="tab-pane fade show active" id="tab-1" role="tabpanel">
					<!-- <div class="container-fluid"> -->
						
						<!--<div class="row row--grid">
							<div class="col-12 col-sm-6 col-lg-4" th:each="boardList: ${boardList}" style="padding-top:2%;">
								<a href="article.html" class="post__img">
									<img th:src="@{/ImageUpload/{aa}(aa=${boardList.boImage})}" style="height:300px;">
								</a>

								<div class="post__content" style="height:200px;">
									
									<div class="post__title" id="boardListArea"></div>
									
									<div class="post__meta">
										<span th:class="post__date" th:text="${boardList.boDate}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20ZM14.09814,9.63379,13,10.26807V7a1,1,0,0,0-2,0v5a1.00025,1.00025,0,0,0,1.5.86621l2.59814-1.5a1.00016,1.00016,0,1,0-1-1.73242Z"/></svg></span>
										
										
										 
										  
                        					
										<div th:id="root">
										<span th:type="button" th:class="post__comments" th:id="bccomment" th:value="${boardList.boCode}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,9H7a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Zm-4,4H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2ZM12,2A10,10,0,0,0,2,12a9.89,9.89,0,0,0,2.26,6.33l-2,2a1,1,0,0,0-.21,1.09A1,1,0,0,0,3,22h9A10,10,0,0,0,12,2Zm0,18H5.41l.93-.93a1,1,0,0,0,0-1.41A8,8,0,1,1,12,20Z"/></svg></span>
										</div>
										
										
									</div>
									
								</div>
							</div>
							
							
						</div>-->
						
					<!-- </div> -->
				</div>
			</div> 
			
		</div>
	</main>
	<!-- end main content -->

	<!-- footer -->
	<footer th:replace="footer.html :: footer"></footer>
	<!-- end footer -->

	<!-- modal info -->
	<div id="modal-info2" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--green">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.72,8.79l-4.29,4.3L8.78,11.44a1,1,0,1,0-1.41,1.41l2.35,2.36a1,1,0,0,0,.71.29,1,1,0,0,0,.7-.29l5-5a1,1,0,0,0,0-1.42A1,1,0,0,0,14.72,8.79ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Payment #51 was successful!</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Total cost:</label>
			<span class="sign__value">$18.00</span>
		</div>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Payment method: <b>Paypal</b></label>

			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- modal info -->
	<div id="modal-info3" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--red">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.71,8.29a1,1,0,0,0-1.42,0L12,10.59,9.71,8.29A1,1,0,0,0,8.29,9.71L10.59,12l-2.3,2.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L13.41,12l2.3-2.29A1,1,0,0,0,15.71,8.29Zm3.36-3.36A10,10,0,1,0,4.93,19.07,10,10,0,1,0,19.07,4.93ZM17.66,17.66A8,8,0,1,1,20,12,7.95,7.95,0,0,1,17.66,17.66Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Payment #50 failed!</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Total cost:</label>
			<span class="sign__value">$18.00</span>
		</div>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Payment method: <b>Paypal</b></label>

			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- modal info -->
	<div id="modal-info4" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20Zm0-8.5a1,1,0,0,0-1,1v3a1,1,0,0,0,2,0v-3A1,1,0,0,0,12,11.5Zm0-4a1.25,1.25,0,1,0,1.25,1.25A1.25,1.25,0,0,0,12,7.5Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">Example of notification.</h4>

		<div class="sign__group sign__group--row">
			<label class="sign__label">Amount to auto-renew:</label>
			<span class="sign__value">$18.00</span>
		</div>

		<div class="sign__group sign__group--row">
			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->

	<!-- modal info -->
	<div id="modal-info5" class="zoom-anim-dialog mfp-hide modal modal--info">
		<span class="modal__icon modal__icon--purple">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18,7h-.35A3.45,3.45,0,0,0,18,5.5a3.49,3.49,0,0,0-6-2.44A3.49,3.49,0,0,0,6,5.5,3.45,3.45,0,0,0,6.35,7H6a3,3,0,0,0-3,3v2a1,1,0,0,0,1,1H5v6a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V13h1a1,1,0,0,0,1-1V10A3,3,0,0,0,18,7ZM11,20H8a1,1,0,0,1-1-1V13h4Zm0-9H5V10A1,1,0,0,1,6,9h5Zm0-4H9.5A1.5,1.5,0,1,1,11,5.5Zm2-1.5A1.5,1.5,0,1,1,14.5,7H13ZM17,19a1,1,0,0,1-1,1H13V13h4Zm2-8H13V9h5a1,1,0,0,1,1,1Z"></path></svg>
		</span>
		
		<button class="modal__close" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l4.3-4.29a1,1,0,1,0-1.42-1.42L12,10.59,7.71,6.29A1,1,0,0,0,6.29,7.71L10.59,12l-4.3,4.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l4.29,4.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"/></svg></button>

		<h4 class="sign__title">You have received a gift!</h4>

		<div class="sign__group sign__group--row">
			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>

			<span class="sign__text sign__text--small">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</span>
		</div>
	</div>
	<!-- end modal info -->
	<div id="container">
    	<div id="lorem-ipsum"></div>
	</div>
	<div id="modal" class="modal-overlay" role="dialog">
    	<div class="modal-window">
        	<div class="title">
            	<h2 id="modalTitle"></h2>
        	</div>
        <div class="close-area">X</div>
        	<div class="content" id="content">
       		</div>
    	</div>
	</div>
<input th:if = "${session.login ne null}" type="hidden" th:value="${session.login.mId}" th:id="mId">

	<!-- JS -->
	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/smooth-scrollbar.js"></script>
	<script src="js/select2.min.js"></script>
	<script src="js/slider-radio.js"></script>
	<script src="js/jquery.inputmask.min.js"></script>
	<script src="js/plyr.min.js"></script>
	<script src="js/main.js"></script>
	
	<script th:if="${session.login ne null}" type="text/javascript" th:inline="javascript">

	var CheckLogin = [[${session.login}]]
	
	if(CheckLogin != null){
		var sessionId = [[${session.login.mId}]]
	}
	
	console.log('sessionId = ' + sessionId);
	
	var clickCheck = false;

	$(document).ready(function(){
		    var loginId = $("#mId").val();
		function init(){
			$.ajax({
				type : "POST",
				url : "ajaxBoardList",
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				success : function(list){
					boardList(list);
				},
				error : function(){
					alert('게시글 리스트 불러오기 실패');
				}
			});
		}
		
		$.ajax({
			type : "POST",
			url : "ajaxBoardList",
			contentType: "application/json; charset=utf-8",
			dataType : "json",
			success : function(list){
				boardList(list);
			},
			error : function(){
				alert('게시글 리스트 불러오기 실패');
			}
		});
		
		// 게시글 목록 메소드
		function boardList(list){
			
			var output = "";
			
			output += "<div class='container-fluid'>";
			output += "<div class='row row--grid'>";
			
			
			for(var i in list){
				
				(function(i){
					$.ajax({
						type: "POST",
						url: "boLikeCheck",
						data: {"bolBoCode" : list[i].boCode,
							   "bolMid" : sessionId},
						dataType: "json",
						async: false,
						success: function(result){

							output += "<div class='col-12 col-sm-6 col-lg-4' style='padding-top:2%; width:30vw; height:70vh;'>";
							output += "<img src='/ImageUpload/"+ list[i].boImage + "' style='width:100%; height:50%;'>";
							output += "<div class='post__content' style='height:300px;'>";
							output += "<h3 style='color:white;'>" + list[i].boTitle + "</h3>";
							output += "<h4 style='color:white;'>" + list[i].boContent + "</h4>";
							output += "<h4 style='position:absolute; bottom:24px;'><a href='boardWriterView?boWriter="+list[i].boWriter+"&mId="+loginId+"'>" + list[i].boWriter + "</a></h4>";
							output += "<div class='post__meta' style='font-size:10px; position:absolute; bottom:8px; width:90%;'>";
							output += "<span class='post__date'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>" + "<path d='M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20ZM14.09814,9.63379,13,10.26807V7a1,1,0,0,0-2,0v5a1.00025,1.00025,0,0,0,1.5.86621l2.59814-1.5a1.00016,1.00016,0,1,0-1-1.73242Z'/>" + "</svg>" + list[i].boDate +"</span>";
							
							
							
							if(result == ""){
								if(list[i].boLike <= 0){
									output += "<div><img id='"+ list[i].boCode +"' class='heartChange' value='check1' src='/heart/love.png' style='width: 25px;'/></td><td><span id='"+list[i].boCode+"check' class='likeUserList'></span></div>"
								} else if(list[i].boLike > 0){
									output += "<div><img id='"+ list[i].boCode +"' class='heartChange' value='check1' src='/heart/love.png' style='width: 25px;'/></td><td><span style='postion:absolute;' id='"+list[i].boCode+"check' class='likeUserList'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span></div>"
								}
							} else if(result != ""){
								output += "<div><img id='"+ list[i].boCode +"' class='heartChange' value='check2' src='/heart/heart2.png' style='width: 25px;'/></td><td><span style='postion:absolute;' id='"+list[i].boCode+"check' class='likeUserList'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span></div>"
							}
							
							 if(sessionId == list[i].boWriter || sessionId == 'admin'){
								output += "<div><a href='boardModiForm?boCode="+list[i].boCode +"'>수정</a></div>"
								output += "<div><a href='boardDelete?boCode="+list[i].boCode +"'>삭제</a></div>";
							} else{
								output += "<div></div>"
								output += "<div></div>"
							} 
							output += "<div id='root'>";
								if(list[i].boComment.length <= 0){
									output += "<span type='button' class='post__comments' id='bccomment' value='"+list[i].boCode +"'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>" + "<path d='M17,9H7a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Zm-4,4H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2ZM12,2A10,10,0,0,0,2,12a9.89,9.89,0,0,0,2.26,6.33l-2,2a1,1,0,0,0-.21,1.09A1,1,0,0,0,3,22h9A10,10,0,0,0,12,2Zm0,18H5.41l.93-.93a1,1,0,0,0,0-1.41A8,8,0,1,1,12,20Z'/></svg>"+ list[i].boComment.length + "</span>";
								} else if(list[i].boComment.length > 0){
									output += "<span type='button' class='post__comments' id='bccomment' value='"+list[i].boCode +"'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>" + "<path d='M17,9H7a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Zm-4,4H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2ZM12,2A10,10,0,0,0,2,12a9.89,9.89,0,0,0,2.26,6.33l-2,2a1,1,0,0,0-.21,1.09A1,1,0,0,0,3,22h9A10,10,0,0,0,12,2Zm0,18H5.41l.93-.93a1,1,0,0,0,0-1.41A8,8,0,1,1,12,20Z'/></svg>"+ list[i].boComment.length + "</span>";		
								}
							output += "</div>"
							output += "</div>";
							output += "</div>";
							output += "</div>";
							
							
						
							
						},
						error: function(){
							alert('좋아요한 게시글 리스트 불러오기 실패');
						}
					});
				 })(i);
			}
			
			output += "</div>";
			output += "</div>";
			
			var boardListArea = document.getElementById('boardListArea');
			boardListArea.innerHTML = output;
			
			$(".post__comments").click(function(){
				var bcBoCode = $(this).attr('value');
				console.log(bcBoCode);
				
				$.ajax({
					type: "POST",
					url: "bcList",
					data : {"bcBoCode": bcBoCode},
					dataType: "json",
					success: function(commentList){
						var output ="";
						var output1 ="댓글";
						console.log(bcBoCode);
						console.log(commentList.length)
						output += "<table>";
						 for(var comment in commentList){
							 
							if(commentList.length > 0){
								 
							output += "<tr>";
							
							output += "<td rowspan='3' style='text-align:center;'><img src='/profile/"+commentList[comment].mProfileName+"' style='width:60px;'></td>"; 
							
							output += "</tr>";
							
							output += "<tr>";
							
							output += "<td>" + commentList[comment].bcMid+"</td>";
							
							output += "</tr>";
							
							output += "<tr>";
							
							output += "<td style='font-size:18px;'>" + commentList[comment].bcContent+"</td>";
							
							output += "</tr>";
							output += "<tr>";
							
							output += "<td></td>"
							output += "<td><font color='gray'>" + commentList[comment].bcDate+"</font></td>";
							
							
						 if(commentList[comment].bcMid == sessionId || sessionId == 'admin'){
							output += "<td><button class ='commentDelete' id='"+commentList[comment].bcCode+"' style='color:white;'>삭제</button></td>";
						}  
							output += "</tr>";
						}  
							
						 }
						 	
						 output += "<tr>";
							output += "<td colspan='8'><textarea id='"+bcBoCode+"check2' class='sign__textarea' style='height:50%;'></textarea></td>";
							output += "<td><button class='commBtn' id='"+bcBoCode+"' value='"+bcBoCode+"' style='color:white;'>등록</button></td>";
							output += "</tr>";
						 	output += "</table>";
						 
					
						const modalContent = document.getElementById("content");
						modalContent.innerHTML = output;
						
						var modalTitle = document.getElementById("modalTitle");
						modalTitle.innerHTML = output1;
						
						const modal = document.getElementById("modal")
						
						modal.style.display = "flex"
						
							  const closeBtn = modal.querySelector(".close-area")
				                closeBtn.addEventListener("click", e => {
				                    modal.style.display = "none"
				                });

				                modal.addEventListener("click", e => {
				                    const evTarget = e.target
				                    if (evTarget.classList.contains("modal-overlay")) {
				                        modal.style.display = "none"
				                    }
				                });

				                window.addEventListener("keyup", e => {
				                    if (modal.style.display === "flex" && e.key === "Escape") {
				                        modal.style.display = "none"
				                    }
				                    
				                });
					},
					error : function(){
						alert('실패');
					}
				});
				
			});
			 $(".post__comments").click(function () {
			        $("#modal").fadeIn();
			    });

		    $("#modal_close_btn").click(function () {
		        $("#modal").fadeOut();
		    });
			
			// class명이 heartChange 인 태그를 클릭했을때 작동하는 메소드
			$(".heartChange").click(function(){
				
				var boCode = $(this).attr('id');
				console.log("boCode : "+boCode);
				
				var CheckHeart = $(this).attr('value');
				console.log("CheckHeart : " + CheckHeart);
				
				if(CheckHeart == "check1"){
					$.ajax({
						type : "POST",
						url : "boLikeUp",
						data : {"boCode" : boCode,},
						dataType : "json",
						success : function(list){
							LikePlus(list);
							
							$.ajax({
								type : "POST",
								url : "boLikeInsert",
								data : {"bolBoCode" : boCode,
										"bolMid" : sessionId},
								dataType : "json",
								success : function(list){
								},
								error : function(){
								}
							});
							
						},
						error : function(){
							alert('좋아요 증가 실패');
						}
					});
					
					// 좋아요 클릭시 좋아요 증가 메소드(ajax)
					function LikePlus(list) {
						
						var output1 = "";
						for ( var i in list) {
							if(list[i].boLike <= 0){
								output1 += "<span></span>";
							} else if(list[i].boLike > 0){
								output1 += "<span id='"+list[i].boCode+"check'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span>";
							}
							
						}
						var spanClassName = boCode + "check";
						
						var td1 = document.getElementById(spanClassName);
						td1.innerHTML = output1;
						
						document.getElementById(spanClassName).className='likeUserList';
						
					}
					CheckHeart = $(this).attr('value',"check2")
					$(this).attr("src","/heart/heart2.png");
					
				} else if(CheckHeart == "check2"){
					$.ajax({
						type : "POST",
						url : "boLikeDown",
						data : {"boCode" : boCode},
						dataType : "json",
						success : function(list){
							LikeMinus(list);
							
							$.ajax({
								type : "POST",
								url : "boLikeDelete",
								data : {"bolBoCode" : boCode,
										"bolMid" : sessionId},
								dataType : "json",
								success : function(list){
								},
								error : function(){
								}
							});
						},
						error : function(){
							alert('좋아요 감소 실패');
						}
					});
					
				// 좋아요 클릭시 좋아요 감소 메소드(ajax)
					function LikeMinus(list){
						
						var output2 = "";
						for(var i in list){
							if(list[i].boLike <= 0){
								output2 += "<span></span>"
							} else if(list[i].boLike > 0){
								output2 += "<span id='"+list[i].boCode+"check'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span>"
							}
						}
						
						var spanClassName = boCode + "check";

						var td1 = document.getElementById(spanClassName);
						td1.innerHTML = output2;
						
						document.getElementById(spanClassName).className = 'likeUserList';
						
					}
				
					CheckHeart = $(this).attr('value',"check1");
					$(this).attr("src","/heart/love.png");
					
				}
				
			});
			
			$(".likeUserList").click(function(){
				
				var boCode123 = $(this).attr('id');
				console.log("선택한곳 코드 : "+boCode123);
					
				var selectBoardCode = boCode123.replace("check","");
				console.log("선택한곳 코드자름 : "+selectBoardCode);
				
				const modal = document.getElementById("modal");
				
				const btnModal = document.getElementById(boCode123);
				
				$.ajax({
					type : "POST",
					url : "boardListUserList",
					data : {"bolBoCode" : selectBoardCode},
					dataType : "json",
					success : function(list){
						
						var output3 = "";
						var output4 = "좋아요";
						if(list.length <= 0){
							output3 += "<p>가장 먼저 좋아요를 눌러보세요</p>";
						} else if(list.length > 0){
							for(var i in list){
								output3 += "<p><a href='boardWriterView?boWriter="+list[i].mId+"'><img src='/profile/"+ list[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'>" + list[i].mName + "</a></p>";
							}
						}
						
						const modalContent = document.getElementById("content");
						modalContent.innerHTML = output3;
						
						var modalTitle = document.getElementById("modalTitle");
						modalTitle.innerHTML = output4;
						
				    	modal.style.display = "flex";
						
				    	const closeBtn = modal.querySelector(".close-area")
				    	closeBtn.addEventListener("click", e => {
				    		modal.style.display = "none"
				    	});	
				    	
				    	modal.addEventListener("click", e => {
				    	    const evTarget = e.target
				    	    if(evTarget.classList.contains("modal-overlay")) {
				    	        modal.style.display = "none"
				    	    }
				    	});
				    	
				    	window.addEventListener("keyup", e => {
				    	    if(modal.style.display === "flex" && e.key === "Escape") {
				    	        modal.style.display = "none"
				    	    }
				    	});
				    	   
					},
					error : function(){
						alert('게시글 리스트 불러오기 실패');
					}
				});
				
			});
			
			$("#searchBtn").click(function(){
				
				var searchName = $('#search').val();
				console.log("searchName : "+ searchName);
				
				$.ajax({
					type : "POST",
					url : "ajaxBoardSelect",
					data : {"boTitle" : searchName},
					dataType : "json",
					success : function(list){
						boardList(list);
					},
					error : function(){
						alert('게시글 리스트 불러오기 실패');
					}
				});
				
				
			});
			
			$("#LikeBoardListBtn").click(function(){
				
				$.ajax({
					type : "POST",
					url : "LikeBoardList",
					data : {"boWriter" : sessionId},
					dataType : "json",
					success : function(list){
						boardList(list);
					},
					error : function(){
						alert('게시글 리스트 불러오기 실패');
					}
				});
			});
			
			$("#followedBoardListBtn").click(function(){
				
				$.ajax({
					type : "POST",
					url : "followedBoardList",
					data : {"boWriter" : sessionId},
					dataType : "json",
					success : function(list){
						
						boardList(list);
					},
					error : function(){
						alert('게시글 리스트 불러오기 실패');
					}
				});
			});
			
			$("#myBoardListBtn").click(function(){
				
				$.ajax({
					type : "POST",
					url : "myBoardList2",
					data : {"boWriter" : sessionId},
					dataType : "json",
					success : function(list){
						
						boardList(list);
					},
					error : function(){
						alert('게시글 리스트 불러오기 실패');
					}
				});
			});
			
		}
	});
	$(document).on('click','.commBtn', function(){
		console.log('세션 아이디 : ' +sessionId);
		console.log('bcBoCode : ' + $(this).attr('id'));
		
		if(!sessionId){
			alert('로그인 이후 사용해주세요!');
			location.href="memberLogin";
		} else{
			var bcMid = sessionId;
			var bcBoCode = $(this).attr('id');
			
			var bcContentCheck = bcBoCode + "check2";
			
			console.log("bcContentCheck : " + bcContentCheck);
			
			var bcContent = document.getElementById(bcContentCheck).value;
			
			console.log("댓글내용 : "+bcContent);
			
			$.ajax({
				type : "POST",
				url : "bcWrite",
				data : {"bcMid" : bcMid,
						"bcBoCode" : bcBoCode,
						"bcContent" : bcContent},
				dataType : "json",
				success : function(list){
					location.reload();
					$('.TestCheck').val("");
				},
				error : function(){
					alert('댓글 등록에 실패하였습니다.');
				}
			});
		}
	});
	
	$(document).on('click','.commentDelete', function(bcCode){
		var check = confirm('댓글을 삭제하시겠습니까?');
		
		console.log('check : ' + check);
		var bcCode = $(this).attr('id');
		
		console.log('bcCode : ' + bcCode); 
		
		if(check == true){
			$.ajax({ 
				type : "POST",
				url : "bcDelete",
				data : {"bcCode" : bcCode},
				dataType : "json",
				success : function(list){
					location.reload();
				},
				error : function(){
					alert('삭제 실패');
				}
			});
		} else{
			null;
		}
	});
	
	
</script>
<script th:if="${session.login eq null}" type="text/javascript" th:inline="javascript">

	var sessionId = "nullId";

console.log('sessionId = ' + sessionId);

var clickCheck = false;

$(document).ready(function(){
	    var loginId = $("#mId").val();
	function init(){
		$.ajax({
			type : "POST",
			url : "ajaxBoardList",
			contentType: "application/json; charset=utf-8",
			dataType: "json",
			success : function(list){
				boardList(list);
			},
			error : function(){
				alert('게시글 리스트 불러오기 실패');
			}
		});
	}
	
	$.ajax({
		type : "POST",
		url : "ajaxBoardList",
		contentType: "application/json; charset=utf-8",
		dataType : "json",
		success : function(list){
			boardList(list);
		},
		error : function(){
			alert('게시글 리스트 불러오기 실패');
		}
	});
	
	// 게시글 목록 메소드
	function boardList(list){
		
		var output = "";
		
		output += "<div class='container-fluid'>";
		output += "<div class='row row--grid'>";
		
		
		for(var i in list){
			
			(function(i){
				$.ajax({
					type: "POST",
					url: "boLikeCheck",
					data: {"bolBoCode" : list[i].boCode,
						   "bolMid" : sessionId},
					dataType: "json",
					async: false,
					success: function(result){
						output += "<div class='col-12 col-sm-6 col-lg-4' style='padding-top:2%; width:30vw; height:70vh;'>";
						output += "<img src='/ImageUpload/"+ list[i].boImage + "' style='width:100%; height:50%;'>";				
						output += "<div class='post__content' style='height:300px;'>";
						output += "<h3 style='color:white;'>" + list[i].boTitle + "</h3>";
						output += "<h4 style='color:white;'>" + list[i].boContent + "</h4>";
						output += "<h4 style='position:absolute; bottom:24px;'><a href='boardWriterView?boWriter="+list[i].boWriter+"&mId="+loginId+"'>" + list[i].boWriter + "</a></h4>";
						output += "<div class='post__meta' style='font-size:10px; position:absolute; bottom:8px; width:90%;'>";
						output += "<span class='post__date'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>" + "<path d='M12,2A10,10,0,1,0,22,12,10.01114,10.01114,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.00917,8.00917,0,0,1,12,20ZM14.09814,9.63379,13,10.26807V7a1,1,0,0,0-2,0v5a1.00025,1.00025,0,0,0,1.5.86621l2.59814-1.5a1.00016,1.00016,0,1,0-1-1.73242Z'/>" + "</svg>" + list[i].boDate +"</span>";
						
						
						
						if(result == ""){
							if(list[i].boLike <= 0){
								output += "<div><img id='"+ list[i].boCode +"' class='heartChange' value='check1' src='/heart/love.png' style='width: 25px;'/></td><td><span id='"+list[i].boCode+"check' class='likeUserList'></span></div>"
							} else if(list[i].boLike > 0){
								output += "<div><img id='"+ list[i].boCode +"' class='heartChange' value='check1' src='/heart/love.png' style='width: 25px;'/></td><td><span style='postion:absolute;' id='"+list[i].boCode+"check' class='likeUserList'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span></div>"
							}
						} else if(result != ""){
							output += "<div><img id='"+ list[i].boCode +"' class='heartChange' value='check2' src='/heart/heart2.png' style='width: 25px;'/></td><td><span style='postion:absolute;' id='"+list[i].boCode+"check' class='likeUserList'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span></div>"
						}
						
						 if(sessionId == list[i].boWriter || sessionId == 'admin'){
							output += "<div><a href='boardModiForm?boCode="+list[i].boCode +"'>수정</a></div>"
							output += "<div><a href='boardDelete?boCode="+list[i].boCode +"'>삭제</a></div>";
						} else{
							output += "<div></div>"
							output += "<div></div>"
						} 
						output += "<div id='root'>";
							if(list[i].boComment.length <= 0){
								output += "<span type='button' class='post__comments' id='bccomment' value='"+list[i].boCode +"'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>" + "<path d='M17,9H7a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Zm-4,4H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2ZM12,2A10,10,0,0,0,2,12a9.89,9.89,0,0,0,2.26,6.33l-2,2a1,1,0,0,0-.21,1.09A1,1,0,0,0,3,22h9A10,10,0,0,0,12,2Zm0,18H5.41l.93-.93a1,1,0,0,0,0-1.41A8,8,0,1,1,12,20Z'/></svg>"+ list[i].boComment.length + "</span>";
							} else if(list[i].boComment.length > 0){
								output += "<span type='button' class='post__comments' id='bccomment' value='"+list[i].boCode +"'><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>" + "<path d='M17,9H7a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Zm-4,4H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2ZM12,2A10,10,0,0,0,2,12a9.89,9.89,0,0,0,2.26,6.33l-2,2a1,1,0,0,0-.21,1.09A1,1,0,0,0,3,22h9A10,10,0,0,0,12,2Zm0,18H5.41l.93-.93a1,1,0,0,0,0-1.41A8,8,0,1,1,12,20Z'/></svg>"+ list[i].boComment.length + "</span>";		
							}
						output += "</div>"
						output += "</div>";
						output += "</div>";
						output += "</div>";
						
						
					
						
					},
					error: function(){
						alert('좋아요한 게시글 리스트 불러오기 실패');
					}
				});
			 })(i);
		}
		
		output += "</div>";
		output += "</div>";
		
		var boardListArea = document.getElementById('boardListArea');
		boardListArea.innerHTML = output;
		
		$(".post__comments").click(function(){
			var bcBoCode = $(this).attr('value');
			console.log(bcBoCode);
			
			$.ajax({
				type: "POST",
				url: "bcList",
				data : {"bcBoCode": bcBoCode},
				dataType: "json",
				success: function(commentList){
					var output ="";
					var output1 ="댓글";
					console.log(bcBoCode);
					console.log(commentList.length)
					output += "<table>";
					for(var comment in commentList){
						 
						if(commentList.length > 0){
							 
						output += "<tr>";
						
						output += "<td rowspan='3' style='text-align:center;'><img src='/profile/"+commentList[comment].mProfileName+"' style='width:60px;'></td>"; 
						
						output += "</tr>";
						
						output += "<tr>";
						
						output += "<td>" + commentList[comment].bcMid+"</td>";
						
						output += "</tr>";
						
						output += "<tr>";
						
						output += "<td style='font-size:18px;'>" + commentList[comment].bcContent+"</td>";
						
						output += "</tr>";
						output += "<tr>";
						
						output += "<td></td>"
						output += "<td><font color='gray'>" + commentList[comment].bcDate+"</font></td>";
						
						
					 if(commentList[comment].bcMid == sessionId || sessionId == 'admin'){
						output += "<td><button class ='commentDelete' id='"+commentList[comment].bcCode+"' style='color:white;'>삭제</button></td>";
					}  
						output += "</tr>";
					}  
						
					 }
					 	
					 output += "<tr>";
						output += "<td colspan='8'><textarea id='"+bcBoCode+"check2' class='sign__textarea' style='height:50%;'></textarea></td>";
						output += "<td><button class='commBtn' id='"+bcBoCode+"' value='"+bcBoCode+"' style='color:white;'>등록</button></td>";
						output += "</tr>";
					 	output += "</table>";
					 
				
					const modalContent = document.getElementById("content");
					modalContent.innerHTML = output;
					
					var modalTitle = document.getElementById("modalTitle");
					modalTitle.innerHTML = output1;
					
					const modal = document.getElementById("modal")
					
					modal.style.display = "flex"
					
						  const closeBtn = modal.querySelector(".close-area")
			                closeBtn.addEventListener("click", e => {
			                    modal.style.display = "none"
			                });

			                modal.addEventListener("click", e => {
			                    const evTarget = e.target
			                    if (evTarget.classList.contains("modal-overlay")) {
			                        modal.style.display = "none"
			                    }
			                });

			                window.addEventListener("keyup", e => {
			                    if (modal.style.display === "flex" && e.key === "Escape") {
			                        modal.style.display = "none"
			                    }
			                    
			                });
				},
				error : function(){
					alert('실패');
				}
			});
			
		});
		 $(".post__comments").click(function () {
		        $("#modal").fadeIn();
		    });

	    $("#modal_close_btn").click(function () {
	        $("#modal").fadeOut();
	    });
		
		// class명이 heartChange 인 태그를 클릭했을때 작동하는 메소드
		/* $(".heartChange").click(function(){
			
			var boCode = $(this).attr('id');
			console.log("boCode : "+boCode);
			
			var CheckHeart = $(this).attr('value');
			console.log("CheckHeart : " + CheckHeart);
			
			if(CheckHeart == "check1"){
				$.ajax({
					type : "POST",
					url : "boLikeUp",
					data : {"boCode" : boCode,},
					dataType : "json",
					success : function(list){
						LikePlus(list);
						
						$.ajax({
							type : "POST",
							url : "boLikeInsert",
							data : {"bolBoCode" : boCode,
									"bolMid" : sessionId},
							dataType : "json",
							success : function(list){
							},
							error : function(){
							}
						});
						
					},
					error : function(){
						alert('좋아요 증가 실패');
					}
				});
				
				// 좋아요 클릭시 좋아요 증가 메소드(ajax)
				function LikePlus(list) {
					
					var output1 = "";
					for ( var i in list) {
						if(list[i].boLike <= 0){
							output1 += "<span></span>";
						} else if(list[i].boLike > 0){
							output1 += "<span id='"+list[i].boCode+"check'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span>";
						}
						
					}
					var spanClassName = boCode + "check";
					
					var td1 = document.getElementById(spanClassName);
					td1.innerHTML = output1;
					
					document.getElementById(spanClassName).className='likeUserList';
					
				}
				CheckHeart = $(this).attr('value',"check2")
				$(this).attr("src","/heart/heart2.png");
				
			} else if(CheckHeart == "check2"){
				$.ajax({
					type : "POST",
					url : "boLikeDown",
					data : {"boCode" : boCode},
					dataType : "json",
					success : function(list){
						LikeMinus(list);
						
						$.ajax({
							type : "POST",
							url : "boLikeDelete",
							data : {"bolBoCode" : boCode,
									"bolMid" : sessionId},
							dataType : "json",
							success : function(list){
							},
							error : function(){
							}
						});
					},
					error : function(){
						alert('좋아요 감소 실패');
					}
				});
				
			// 좋아요 클릭시 좋아요 감소 메소드(ajax)
				function LikeMinus(list){
					
					var output2 = "";
					for(var i in list){
						if(list[i].boLike <= 0){
							output2 += "<span></span>"
						} else if(list[i].boLike > 0){
							output2 += "<span id='"+list[i].boCode+"check'><strong style='color:white;'>" + list[i].boLike + "명이 좋아합니다.</strong></span>"
						}
					}
					
					var spanClassName = boCode + "check";

					var td1 = document.getElementById(spanClassName);
					td1.innerHTML = output2;
					
					document.getElementById(spanClassName).className = 'likeUserList';
					
				}
			
				CheckHeart = $(this).attr('value',"check1");
				$(this).attr("src","/heart/heart1.png");
				
			}
			
		}); */
		
		$(".likeUserList").click(function(){
			
			var boCode123 = $(this).attr('id');
			console.log("선택한곳 코드 : "+boCode123);
				
			var selectBoardCode = boCode123.replace("check","");
			console.log("선택한곳 코드자름 : "+selectBoardCode);
			
			const modal = document.getElementById("modal");
			
			const btnModal = document.getElementById(boCode123);
			
			$.ajax({
				type : "POST",
				url : "boardListUserList",
				data : {"bolBoCode" : selectBoardCode},
				dataType : "json",
				success : function(list){
					
					var output3 = "";
					var output4 = "좋아요";
					if(list.length <= 0){
						output3 += "<p>가장 먼저 좋아요를 눌러보세요</p>";
					} else if(list.length > 0){
						for(var i in list){
							output3 += "<p><a href='boardWriterView?boWriter="+list[i].mId+"'><img src='/profile/"+ list[i].mProfileName + "' style='width: 30px; height: 30px; border-radius: 70%; overflow: hidden;'>" + list[i].mName + "</a></p>";
						}	
					}
					
					const modalContent = document.getElementById("content");
					modalContent.innerHTML = output3;
					
					var modalTitle = document.getElementById("modalTitle");
					modalTitle.innerHTML = output4;
					
			    	modal.style.display = "flex";
					
			    	const closeBtn = modal.querySelector(".close-area")
			    	closeBtn.addEventListener("click", e => {
			    		modal.style.display = "none"
			    	});	
			    	
			    	modal.addEventListener("click", e => {
			    	    const evTarget = e.target
			    	    if(evTarget.classList.contains("modal-overlay")) {
			    	        modal.style.display = "none"
			    	    }
			    	});
			    	
			    	window.addEventListener("keyup", e => {
			    	    if(modal.style.display === "flex" && e.key === "Escape") {
			    	        modal.style.display = "none"
			    	    }
			    	});
			    	   
				},
				error : function(){
					alert('게시글 리스트 불러오기 실패');
				}
			});
			
		});
		
		$("#searchBtn").click(function(){
			
			var searchName = $('#search').val();
			console.log("searchName : "+ searchName);
			
			$.ajax({
				type : "POST",
				url : "ajaxBoardSelect",
				data : {"boTitle" : searchName},
				dataType : "json",
				success : function(list){
					boardList(list);
				},
				error : function(){
					alert('게시글 리스트 불러오기 실패');
				}
			});
			
			
		});
		
		$("#LikeBoardListBtn").click(function(){
			
			$.ajax({
				type : "POST",
				url : "LikeBoardList",
				data : {"boWriter" : sessionId},
				dataType : "json",
				success : function(list){
					boardList(list);
				},
				error : function(){
					alert('게시글 리스트 불러오기 실패');
				}
			});
		});
		
		
		
		$("#followedBoardListBtn").click(function(){
			alert("1");
			$.ajax({
				type : "POST",
				url : "followedBoardList",
				data : {"boWriter" : sessionId},
				dataType : "json",
				success : function(list){
					boardList(list);
				},
				error : function(){
					alert('게시글 리스트 불러오기 실패');
				}
			});
		});
		
		
	}
});

$(document).on('click','.commBtn', function(){
	console.log('세션 아이디 : ' +sessionId);
	console.log('bcBoCode : ' + $(this).attr('id'));
	
	if(!sessionId){
		alert('로그인 이후 사용해주세요!');
		location.href="memberLogin";
	} else{
		var bcMid = sessionId;
		var bcBoCode = $(this).attr('id');
		
		var bcContentCheck = bcBoCode + "check2";
		
		console.log("bcContentCheck : " + bcContentCheck);
		
		var bcContent = document.getElementById(bcContentCheck).value;
		
		console.log("댓글내용 : "+bcContent);
		
		$.ajax({
			type : "POST",
			url : "bcWrite",
			data : {"bcMid" : bcMid,
					"bcBoCode" : bcBoCode,
					"bcContent" : bcContent},
			dataType : "json",
			success : function(list){
				location.reload();
				$('.TestCheck').val("");
			},
			error : function(){
				alert('로그인 후 이용 가능합니다.');
			}
		});
	}
});

$(document).on('click','.commentDelete', function(bcCode){
	var check = confirm('댓글을 삭제하시겠습니까?');
	
	console.log('check : ' + check);
	var bcCode = $(this).attr('id');
	
	console.log('bcCode : ' + bcCode); 
	
	if(check == true){
		$.ajax({ 
			type : "POST",
			url : "bcDelete",
			data : {"bcCode" : bcCode},
			dataType : "json",
			success : function(list){
				location.reload();
			},
			error : function(){
				alert('삭제 실패');
			}
		});
	} else{
		null;
	}
});


</script>
</body>
</html>